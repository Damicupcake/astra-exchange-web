{
	"rules": {
		"bazaarData": {
			".read": true,
			".write": false
		},
		"companies": {
			".read": "auth != null",
			"$uid": {
				".write": "$uid === auth.uid",
				"products": {
					"$productId": {
						"name": {
							".validate": "newData.isString() && newData.val() != ''"
						},
						"cost": {
							".validate": "newData.isNumber() && newData.val() > 0"
						},
						"inStock": {
							".validate": "newData.isBoolean()"
						}
					}
				}
			}
		},
		"transactions": {
			"$uid": {
				".read": "$uid === auth.uid",
				".write": "$uid === auth.uid || (root.child('cards/' + $uid).exists() && root.child('users/' + root.child('cards/' + $uid).val() + '/cards/' + $uid).val())",
				"$transactionId": {
					".write": "!data.exists()",
					"time": {
						".validate": "newData.isString()"
					},
					"from": {
						".validate": "newData.isString() && root.child('users/' + newData.val()).exists()"
					},
					"to": {
						".validate": "newData.isString() && newData.val() != $uid && root.child('users/' + newData.val()).exists()"
					},
		  			"amount": {
						".validate": "newData.isNumber() && ((newData.val() > 0 && newData.val() <= root.child('users/' + $uid + '/balance').val()) || auth.uid === 'h621pgey1vPfxrmoW5LUkZaHkhT2')"
					},
					"balance": {
						".validate": "newData.isNumber() && newData.val() >= 0"
					},
					"message": {
						".validate": "newData.isString()"
					}
				}
			}
		},
		"invoices": {
			"$uid": {
				".read": "$uid === auth.uid",
				".write": "auth != null",
				"$invoiceId": {
					"time": {
						".validate": "newData.isString()"
					},
					"status": {
						".validate": "newData.val() === 'pending' || newData.val() === 'declined' || newData.val() === 'accepted'"
					},
					"from": {
						".validate": "newData.isString() && root.child('users/' + newData.val()).exists()"
					},
					"to": {
						".validate": "newData.isString() && root.child('users/' + newData.val()).exists()"
					},
					"amount": {
						".validate": "newData.isNumber() && newData.val() > 0"
					},
					"message": {
						".validate": "newData.isString()"
					}
				}
			}
		},
		"cards": {
			"$cardId": {
				".read": "newData.val() === auth.uid"
			}
		},
		"users": {
			"$uid": {
				".read": true,
				".write": "!data.exists()",
				"name": {
					".validate": "newData.isString() && newData.val() != ''"
				},
				"email": {
					".validate": "newData.isString() && newData.val() != ''"
				},
				"balance": {
					".validate": "newData.val() === 0"
				},
				"cards": {
					"$cardId": {
						".validate": "newData.isBoolean()"
					}
				}
			}
		}
	}
}
